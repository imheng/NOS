#第三节课
###1.中断技术 
　　概念：中端机制是现代计算机系统的重要组成部分之一，每当应用程序执行系统调用求获得操作系统服务、I/O设备报告传输情况，或者产生形形色色的内部和外部事件时，都需要产生中断机制产生中断信号并启动操作系统内核工作，可以说操作系统是由“中断驱动”的。中断的全过程为：中断请求、中断判优、中断响应、中断处理和中断返回。
#####(1)中断的优先级
  　　 中断优先级是CPU响应中断的先后顺序，中断优先处理的原则是：1)先响应优先级高的中断请求，再响应中断级低的中断请求。2)如果一个中断请求已被响应，同级的其他中断请求将被禁止。3)如果多个中断请求同时出现，可以使用硬件或软件的方式，前者做一个硬件链式排队器，后者做一个查询程序，当产生高一级中断时应该屏蔽比他优先级低的中断源。
#####(2)中断的嵌套
 　　  在计算机系统的运行过程中，可能同时出现多个中断，或者上一个中断尚未处理完接着又发生新的中断，于是CPU暂停正在运行的中断处理程序，转而执行新的中断处理程序，这就叫做多重中断或中断嵌套。
#####(3)多重中断事件处理
 　　  对于多重中断，可能是同一优先级别的中断，也可能是不同优先级别的中断，对于同一优先级别的中断通常按自左至右顺序逐个处理。对于不同优先级别的中断区分不同情况处理：串行处理、嵌套处理、即时处理。
###2.进程(Process)
 　　 进程计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。简单来说：进程是线程的容器。程序是指令、数据及其组织形式的描述，进程是程序的实体。进程包括数据结构P、内存代码C、内存数据D、程序状态字信息PSW、通用寄存器信息R。

####(1)	进程的属性
　　进程具有动态性、共享性、独立性、制约性、开发性。

####(2)	进程举例
     不同程序在不同数据集上运行：构成两个无关进程
     不同程序在相同数据集上运行：构成两个共享数据的交往进程。
####(3)	进程状态
　　运行态：指进程占有处理器运行

　　就绪态：指进程具备运行条件等待处理器运行

　　等待态：指进程由于等待资源、输入输出、信号等不具备运行的条件

　　进程三态模型：

      运行态->等待态：等待资源、I/O、信号；
      等待态->就绪态：资源充足、I/O结束、信号完成；
      就绪态->运行态：处理器空闲时选择更高占有优先权抢占进程；
      运行态->就绪态：运行时间片到、有更高优先权进程。
####(4)	进程挂起
　　运行资源不足表现为性能低和死锁两种情况，解决办法：剥夺某些进程的内存及其他资源，调入OS管理的对换区，不参加进程调度，待适当时候再调入内存、恢复资源、参与运行。
####(5)	进程挂起的选择与恢复
　　　一般选择等待态进程进入挂起等待态，也可选择就绪态进程进入挂起就绪态，运行态进程还可以挂起自己，等待事件结束后，等待挂起态进入挂起就绪态，一般选择挂起就绪态进程予以恢复。
####(6) 进程控制块(Process Control Block)
　　　PCB是OS用于记录和刻画进程状态及环境信息的数据结构，包括：标识信息，现场信息，控制信息三部分。
####(7)	进程映像
　　进程映像是某一时刻进程的内容及其执行状态的集合，包括：进程控制块、进程程序块、进程数据块、核心栈。
####(8) 进程上下文
　　进程上下文包括：用户级上下文（用户程序块/用户数据区/用户共享内存）、寄存器上下文（PSW/栈指针/通用寄存器）、系统级上下文（PCB/内存区表/核心栈）。
####(9)队列管理模块
　　 队列管理模块是操作系统实现进程管理的核心模块，操作系统建立多个进程队列，包括就绪队列和等待队列，按需组织为先进先出队列与优先队列。
####(10) 原语 
   　　原语是由若干条指令构成的完成某种特定功能的程序，执行上由不可分割性。原语的执行可以通过关中断实现。
####(11) 进程切换
  　　进程切换必须在操作系统内核模式下完成，这就需要模式切换。包括：用户模式到内核模式（有中断/异常/系统调用中断用户进程执行而触发），内核模式到用户模式（OS执行中断返回指令将控制权交还给用户进程而触发）。
###3.线程
   　  假设有一个工厂，那么工厂就是CPU，工厂内部有许多车间，每一个车间好比一个进程，工厂还有很多的工人，工人就像是线程，一个车间（进程）内有很多工人（线程），车间（进程）可以被工人（线程）共享，车间内还有许多房间，房间的大小不一，因而能住进的工人也就不一样，房间会防止工人的随便进出，因此会挂锁，这个锁就相当于互斥锁（Mutex）,有些房间可以被很多工人使用，但是人数一定，因此会在房间门口挂很多钥匙，这个钥匙就相当于信号量（Semaphore）。
