#第九节课
##复习
###1、	调度分为哪三级？这三级的作用分别是什么？
　　答：高级调度：又称作业调度、长城调度，在多道批处理操作系统中，从输入的一批作业中按照预定的调度策略挑选若干作业进入内存，为其分配所需资源并创建对应作业的用户进程后，便完成启动阶级的高级调度任务，已经为进程做好运行的准备工作，等待进程被调度运行，在作业完成之后还要做结束阶段的善后工作。
中级调度：又称平衡调度、中程调度，根据内存资源情况决定内存中所能容纳的进程数目，并完成外存和内存中的进程对换工作。
低级调度：又称进程调度/线程调度、短程调度，根据某种原则决定就绪队列中的哪个进程/线程获得处理器，并将处理器出让给使用。
###2、	选择调度算法原则有哪些？
1)	资源利用率；
2)	吞吐率；
3)	公平性；
4)	响应时间；
5)	周转时间。
###3、
                    t1      t2
       |————————————|———————|	求周转时间
              A         B                                       
答:周转时间=等待时间+处理时间，即周转时间=A+B

###4、	作业和进程的关系是什么？

答：作业是任务实体，进程是完成任务的执行实体；，没有作业任务，进程无事可做；没有进程，作业任务无法完成。

###5、	作业管理的概念是什么？

答：作业管理是为了合理组织工作流程和方便用户解决应用问题而在操作系统中提供的管理模块，要完成三项任务：作业组织、作业调度和运行控制。

###6、	引发低级调度的事件有哪些？

答：创建进程/线程、进程/线程终止、进程/线程阻塞、进程/线程运行过程中发生中断或异常、进程/线程执行系统调用、进程/线程请求的I/O操作完成、进程/线程耗尽时间片、进程/线程改变优先级。

###7、	低级调度的两种基本类型是什么？

答：剥夺式（强占式）（preemptive）、非剥夺式（非强占式）（nonpreemptive）

###8、	低级调度算法常用的有哪些？

先来先服务算法（FCFS）、最短作业优先算法（SJF）。

##二、新内容
###1、最高响应比优先算法的优点和缺点各是什么？

答：优点：最高响应比优先（HRRF）算法是介于这两种算法之间的一种折中的非剥夺式算法，既考虑作业等待时间，又考虑作业处理时间，这样既照顾短作业又不会使长作业的等待时间过长，有善的改变调度性能。

　　缺点：每次计算各道作业时间的响应比会导致一定的时间开销，其性能比SJF算法略差。

###2、响应比公式及用三种算法求得下题的平均作业周转时间和平均带权作业周转时间。

     响应比=平均周转时间/平均处理时间
          =（平均处理时间+平均等待时间）/平均处理时间
          =1+平均等待时间/平均处理时间
（若要响应比高则需要增加平均等待时间、减少平均处理时间）

例：若有4个作业先后到达系统进入调度，到达系统时间和所需CPU时间为

     作业名 | 到达系统时间 | 所需CPU时间/ms
     作业1  |     0      |	   20
     作业2  |     5	   |       15
     作业3  |     10     |	   5
     作业4  |     15	   |       10
分别对作业流执行FCFS、SJF、HRRF调度算法并算出平均作业周转时间（T）和平均带权作业周转时间（W）。

解：a.FCFS
 
    0|--------------|20                        20               
      5|————————————|20----|35                20+15-5
        10|————————————————|35---|40           35+5-10
          15 |———————————————————|40---|50     40+10-15
由上图可知

       T=（20+30+30+35）/4=28.75ms
       W=[(20/20）+（30/15）+（30/5）+（35/10）]/4=3.125
b.SJF

因为是最短作业优先算法，所以作业运行的先后顺序是作业1、作业3、作业4、作业2。计算如下：

    0|--------------|20                             作业1:  20
       5|——————————————————————|35-----|50          作业2:  50-5
          10|———————|20--|25                        作业3:  25-10
              15|————————|25---|35                  作业4:  35-15
由上图可知
   
       T=(20+45+15+20)/4=25ms
       W=[(20/20)+(15/5)+(20/10)+(45/15)]/4=2.25
c.HRRF

开始只有作业1，作业1被选中，执行时间为20ms。

    0|——————————————|20                      作业1：20
作业1执行完毕后，其他作业的响应比分别为：
作业2:1+15/15=2   作业3:1+10/5=3  作业4:1+5/10=3/2,此时响应比最长为作业3，所以作业3被选中，执行时间为5ms。 

                  20|———|25               作业3：25-10
作业3执行完毕后，其他作业的响应比分别为：
作业2:1+20/15=7/3  作业4;1+10/10=2, 此时响应比最长为作业2，所以作业1被选中，执行时间为15ms。

                      25|————————|40                      作业2: 40-5
作业2执行完毕后，作4被选中，执行时间为10ms。

                               40|—————|50          作业4: 50-15
有上述可知：

       T=（20+15+35+35）/4=26.25ms
       W=[(20/20)+(15/5)+(35/10)+(35/15)]/4≈2.46
###3、优先级调度算法。
答：1、优先级通常用0—4095的整数表示，这个整数叫做优先级数，优先级与优先数之间的关系因系统而异。

　　2、进程/线程优先级的确定可采用静态和动态两种方式。

　　　(1)静态优先级在进程/线程创建时确定，且生命周期中不在改变，可按照  外部指定和内部指定方法计算静态优先级。

　　　(2)动态优先级使各进程/线程优先级随时间而改变。
###4、轮转调度算法。
答: 轮转调度（RR）算法也称时间片调度，调度程序每次把CPU分配给就绪队列首进程/线程使用规定的时间间隔，称为时间片，通常为10ms-200ms。

　　RR算法是一种剥夺式调度，系统耗费在进程/线程切换上的开销比较大，这个开销与时间片大小有关。如果时间片取值太小，将导致大多数进程/线程都不可能在一个时间片内运行完毕，就会频繁切换，开销显著增大，所以从系统效率角度来看，时间片段得大一点好；另一方面，时间片长度较大，那么随着就绪队列中进程/线程数目增加，轮转一次耗费的总时间加长，即对每个进程/线程的响应速度较慢，甚至时间片大到让进程/线程足以完成其所有任务，RR调度算法便退化成FCFS算法。所以，确定时间片长度要从进程数目、切换开销、系统效率和响应时间等多方面因素加以考虑。
###5、多级反馈队列调度算法。

答:多级反馈队列（MLFQ）算法又称反馈循环队列。

优点：MLFQ调度算法具有较好的性能，能满足各类应用需要。

缺点：MLFQ调度算法会导致“饥饿”问题。
